function responsiveSwitchURL(e){var t=location.pathname,i=location.search,o=location.hash;return i.indexOf("?")>=0?0===i.indexOf("?responsive="+!e)?i=i.replace("?responsive="+!e,"?responsive="+e):i.indexOf("&responsive="+!e)>0?i=i.replace("&responsive="+!e,"&responsive="+e):i+="&responsive="+e:i="?responsive="+e,t+i+o}function setMenuToggle(e,t,i,o){i?$(e).addClass("inactive"):$(t).addClass("inactive"),$(t).click(function(){return menuToggle(e,t,i,o),!1})}function menuToggle(e,t,i,o){if(o||(o=150),i||(i=!1),e=$(e).filter(":not(:animated)"),!e.length)return!1;if(i){if($(".dropdown").filter(":animated").length>0)return!1;activeMenus=$(".dropdown.active").not(e),activeMenus.toggleClass("active inactive"),activeMenus.slideToggle({duration:o,queue:!1}).fadeToggle({duration:0,queue:!1}).fadeToggle(o,function(){document.activeElement.focus()}),$(e).toggleClass("active inactive")}else $(t).toggleClass("active inactive");e.slideToggle({duration:o,queue:!1}).fadeToggle({duration:0,queue:!1}).fadeToggle(o,function(){document.activeElement.focus()})}function preloadImages(e){var t=$("html").hasClass("inlinesvg","scaled")?"svg":"png",i="svg"===t?"/assets/images/svg/":pathToFiles,o='<img class="preload" style="display: none" src="'+i+e+"."+t+'" />';$("body").append(o),$(".preload").remove()}function setFormHeight(e,t){currentFormHeight!=e&&(currentFormHeight=e,$(".wufoo-form:visible").height(e),$.fancybox.update())}function setFormWidth(e){var t=$(window).width(),i=.8*t,o=800;i>o&&(i=o),currentFormWidth!=i&&(currentFormWidth=i,$(e).width(i),$.fancybox.update())}var regionName,brandColour,pathToFiles,screenSizes,screenSize,isResponsive;if(Modernizr.rgba&&Modernizr.multiplebgs&&Modernizr.backgroundsize&&Modernizr.boxshadow&&Modernizr.opacity&&Modernizr.generatedcontent&&Modernizr.inlinesvg&&Modernizr.boxsizing||$(".banner-container.layout-helper").after('<div class="banner-container warning"><div class="banner"><strong>Warning!</strong> The browser you&rsquo;re using does not support all the features of this site. <a href="http://whatbrowser.org/">Upgrade your browser</a> for a better experience.</div></div>'),"small"==screenSize||"medium"==screenSize){var text;text="false"!=readCookie("responsive")?'<p class="switch"><strong>Mobile</strong> | <a href="'+responsiveSwitchURL(!1)+'">Desktop</a></p>':'<p class="switch"><a href="'+responsiveSwitchURL(!0)+'">Mobile</a> | <strong>Desktop</strong></p>',$("#footer").append(text)}$(".menu-bar>li:not(.last)").each(function(){var e=$(this).children(".dropdown-container").outerWidth(),t=$(this).offset().left;e+t>$("#container").outerWidth()&&$(this).children(".dropdown-container").css("left","auto").css("right","-1px")}),"false"!=responsiveCookie&&jQuery.inArray(screenSize,screenSizes)<=jQuery.inArray("medium",screenSizes)&&$("#navigation li").length&&($("#breadcrumbs a.breadCrumb").each(function(){$(this).replaceWith("<span>"+$(this).html()+"</span>")}),$("#breadcrumbs p.breadCrumb").wrapInner('<a id="navigation-toggle" href="/"></a>')),setMenuToggle("#navigation","#navigation-toggle"),setMenuToggle("#menu ul.menu-bar","#menu-toggle"),"small"!==screenSize&&"object"==typeof imageGallery&&"object"==typeof imageGallery.items&&imageGallery.items.length&&$("#image-gallery a").on("click",function(){return $.fancybox(imageGallery.items,{prevEffect:"none",nextEffect:"none",padding:11,margin:[18,18,24,18],minWidth:300,helpers:{title:{type:"inside"},overlay:{css:{"border-radius":0,"webkit-border-radius":0,"background-color":"rgba(0,0,0,0.5)"}},thumbs:{width:100,height:100}}}),!1}),$(".content>.module>ul").each(function(){targetItems=$(this).children(":gt(4)"),targetItems.length>0&&(targetItems.hide(),$(this).append('<a class="toggle" href="#"></a>'),currentID="#"+$(this).parent().attr("id"),setMenuToggle(currentID+">ul>li:gt(4)",currentID+" a.toggle"))});var youTubeEmbedPrefix="http://www.youtube.com/embed/",teacherTubeEmbedPrefix="http://www.teachertube.com/embed.php";if("small"==screenSize){var youTubeVideoPrefix="http://www.youtube.com/watch?v=",youTubePlaylistPrefix="http://www.youtube.com/playlist?list=",teacherTubeVideoPrefix="http://www.teachertube.com/mobile/video/";$("a[href^='"+youTubeEmbedPrefix+"']").each(function(){var e,t,i,o=$(this).attr("href").replace(youTubeEmbedPrefix,""),r=/^([^"&?\/ ]+)/,n=/(?:\?|\&)*list=([^"&?\/ ]+)/;t=r.exec(o),i=n.exec(o),null!==t&&t.length>1&&(t=t[1]),null!==i&&i.length>1&&(i=i[1]),t&&("videoseries"===t?i&&(e=youTubePlaylistPrefix+i):(e=youTubeVideoPrefix+t,i&&(e+="&list="+i)),e&&$(this).attr("href",e))}),$("a[href^='"+teacherTubeEmbedPrefix+"']").each(function(){var e,t=$(this).attr("href").replace(teacherTubeEmbedPrefix,""),i=/=video_([^"&?\/ ]+)/;e=i.exec(t),null!==e&&e.length>1&&(e=e[1]),e&&$(this).attr("href",teacherTubeVideoPrefix+e)})}else $("a[href^='"+youTubeEmbedPrefix+"']").add("a[href^='"+teacherTubeEmbedPrefix+"']").fancybox({type:"iframe",padding:11,width:178,height:100,fitToView:!1,autoCenter:!0,iframe:{scrolling:"no"},onUpdate:function(){var e,t,i=$(window).width(),o=$(window).height();o>9*i/16?(e=.8*i,t=9*e/16):(t=.8*o,e=16*t/9),e>853&&(e=853,t=480),$(".fancybox-wrap.fancybox-type-iframe").width(e+22).height(t+22),$(".fancybox-inner").width(e).height(t),$.fancybox.reposition()}});"small"!=screenSize&&$("a[href*='.wufoo.com/forms/']").each(function(e){var t=$(this).attr("href"),i=new RegExp(/^https\:\/\/(\w+)\.wufoo.com\/forms\/(\w+)\/?$/gi),o=i.exec(t);if(o){var r=o[1],n=o[2];if(!$("#wufoo-"+n).length){$("body").append('<div id="wufoo-'+n+'" class="wufoo-form"></div>');var a,s=document.createElement("script"),c={userName:r,formHash:n,autoResize:!0,resizeDone:setFormHeight,async:!0,host:"wufoo.com",header:"show",ssl:!0};s.src=("https:"==document.location.protocol?"https://":"http://")+"wufoo.com/scripts/embed/form.js",s.onload=s.onreadystatechange=function(){var e=this.readyState;if(!e||"complete"==e||"loaded"==e)try{a=new WufooForm,a.initialize(c),a.display()}catch(t){}};var l=(document.getElementsByTagName("script")[0],document.getElementById("wufoo-"+n));l.insertBefore(s)}$(this).click(function(){return setFormWidth(".wufoo-form"),$.fancybox.open([{href:"#wufoo-"+n}],{padding:11,margin:11,fitToView:!1,fixed:!1,onUpdate:function(){setFormWidth(".wufoo-form")}}),!1})}}),preloadImages(regionName+"-expand"),preloadImages(regionName+"-contract"),"small"==screenSize&&isResponsive&&preloadImages(regionName+"-menu-button-active"),isResponsive&&(window.onpageshow=function(e){e.persisted&&setTimeout(function(){setFontSize()},100)},$(window).resize(function(){setFontSize()}));var currentFormHeight,currentFormWidth;